{% extends 'base.html' %}
{% load static %}

{% block title %}Admin Dashboard - Paws a Moment Rescue{% endblock %}

{% block content %}
<div class="adoption-page-header" style="padding-bottom: 20px;">
    <h1 class="white-text">Admin Dashboard</h1>
    <p class="white-text">Manage your rescue metrics and data.</p>
</div>

<div class="adoption-page-wrapper" style="margin-top: -50px; position: relative; z-index: 10;">
    <div style="background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); border: 1px solid rgba(255, 255, 255, 0.3);">

        <div style="display: flex; justify-content: flex-end; margin-bottom: 30px;">
            <a href="/admin/" class="btn-link" style="background-color: #483D8B; border-color: #483D8B; padding: 10px 25px;">
                <i class="fa-solid fa-gears"></i> Open Admin Backend
            </a>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px;">
            <div style="background: rgba(106, 90, 205, 0.05); padding: 25px; border-radius: 15px; border: 1px solid #e0defa;">
                <h3 style="color: #483D8B; border-bottom: 2px solid #6A5ACD; padding-bottom: 10px; margin-bottom: 15px;">Animals</h3>
                <p><strong>Total:</strong> {{ total_animals }}</p>
                <p><strong>Available:</strong> {{ available_animals }}</p>
                <p><strong>Adopted:</strong> {{ adopted_animals }}</p>
                <p><strong>Adopted This Month:</strong> {{ adopted_this_month }}</p>
            </div>

            <div style="background: rgba(106, 90, 205, 0.05); padding: 25px; border-radius: 15px; border: 1px solid #e0defa;">
                <h3 style="color: #483D8B; border-bottom: 2px solid #6A5ACD; padding-bottom: 10px; margin-bottom: 15px;">Adoption Apps</h3>
                <p><strong>Total:</strong> {{ total_adoption_apps }}</p>
                <p><strong>This Month:</strong> {{ adoption_apps_this_month }}</p>
                <p><strong>Unprocessed:</strong> {{ unprocessed_adoption_apps }}</p>
            </div>

            <div style="background: rgba(106, 90, 205, 0.05); padding: 25px; border-radius: 15px; border: 1px solid #e0defa;">
                <h3 style="color: #483D8B; border-bottom: 2px solid #6A5ACD; padding-bottom: 10px; margin-bottom: 15px;">Foster Apps</h3>
                <p><strong>Total:</strong> {{ total_foster_apps }}</p>
                <p><strong>This Month:</strong> {{ foster_apps_this_month }}</p>
                <p><strong>Unprocessed:</strong> {{ unprocessed_foster_apps }}</p>
            </div>

            <div style="background: rgba(106, 90, 205, 0.05); padding: 25px; border-radius: 15px; border: 1px solid #e0defa;">
                <h3 style="color: #483D8B; border-bottom: 2px solid #6A5ACD; padding-bottom: 10px; margin-bottom: 15px;">Site Stats</h3>
                <p><strong>Total Visits:</strong> {{ total_visits }}</p>
                <p><strong>This Month:</strong> {{ visits_this_month }}</p>
                <p><strong>Unique Visitors:</strong> {{ unique_visitors_this_month }}</p>
            </div>
        </div>

        <div style="margin-top: 50px; padding: 20px; background: rgba(255,255,255,0.5); border-radius: 15px;">
            <h2 style="color: #483D8B; margin-bottom: 20px;">Most Viewed Animals</h2>
            <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                {% for animal in most_viewed %}
                <span style="background: #6A5ACD; color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.9rem;">
                    {{ animal.animal_name }}: <strong>{{ animal.view_count }}</strong>
                </span>
                {% empty %}
                <p>No views recorded yet.</p>
                {% endfor %}
            </div>
        </div>

        <div style="margin-top: 50px; text-align: center;">
            <h2 style="color: #483D8B; margin-bottom: 25px;">CSV Reports</h2>
            <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center;">
                <a href="{% url 'dashboard:export_csv' 'animals' %}" class="btn-link" style="font-size: 0.9rem;">Animals</a>
                <a href="{% url 'dashboard:export_csv' 'adoption_applications' %}" class="btn-link" style="font-size: 0.9rem;">Adoption Apps</a>
                <a href="{% url 'dashboard:export_csv' 'foster_applications' %}" class="btn-link" style="font-size: 0.9rem;">Foster Apps</a>
                <a href="{% url 'dashboard:export_csv' 'contact_messages' %}" class="btn-link" style="font-size: 0.9rem;">Contact</a>
                <a href="{% url 'dashboard:export_csv' 'news' %}" class="btn-link" style="font-size: 0.9rem;">News</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}